import requests
import time

# Replace with your Cloudflare API token and account ID
api_token = "1Vd6safq0aqpoVOiAEf8JDrvF-UAPhTwuI_XP2zH"
account_id = "8d9e8a787ac78dde43a1e2542346042c"

# Cloudflare Pages endpoint
pages_endpoint = f"https://api.cloudflare.com/client/v4/accounts/{account_id}/pages/projects"

# Application data
application_data = {
    "name": "mycloudflarepagesapp",
    "files": [
        {
            "file": "D:\\templates\\templates\\index.html",  # Replace with the path to your HTML file
        },
    ],
    "production_branch": "main",  # Set a dummy production branch
}

# Headers with Cloudflare API token
headers = {
    "Authorization": f"Bearer {api_token}",
    "Content-Type": "application/json",
}

# Sample HTML content
html_content = """
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Cloudflare Pages App</title>
</head>
<body>
    <h1>Hello, Cloudflare Pages!</h1>
    <p>This is a sample HTML content for your Cloudflare Pages application.</p>
</body>
</html>
"""

try:
    # Write HTML content to the specified file
    with open(application_data["files"][0]["file"], "w", encoding="utf-8") as html_file:
        html_file.write(html_content)

    print(f"HTML file '{application_data['files'][0]['file']}' created successfully.")

    # Make a POST request to create the Cloudflare Page application
    response = requests.post(pages_endpoint, json=application_data, headers=headers)

    # Rest of the script remains unchanged...
    # (Continue with the original code to check the response and trigger deployment)
    # ...

except requests.RequestException as e:
    print(f"Request error: {str(e)}")
except Exception as e:
    print(f"An unexpected error occurred: {str(e)}")
